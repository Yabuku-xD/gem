# Gem
A beginner-friendly programming language with clear syntax and intuitive structure. The file extension will be `.gem`

## Core Features:

- Readable keywords: Uses clear, English-like keywords
- Simple type system: Types are clearly marked and intuitive
- Clean structure: Minimal syntax characters, focus on readability
- Sensible defaults: Reduces boilerplate code for common patterns
- Consistent syntax: Similar patterns for similar constructs

## Building the Compiler:
To build the compiler:
run `./gradlew clean build` and `./gradlew uberJar`

## Running the Compiler:
The compiler accepts a source file and a flag to indicate at which stage to stop the compilation process: <br>
`java -jar build/libs/GemLang-1.0-SNAPSHOT-uber.jar <source_file> --stop-at <lexing|parsing|semantic>`
<br> For example:
`java -jar build/libs/GemLang-1.0-SNAPSHOT-uber.jar samples/hello.gem --stop-at lexing`
<br> To run a compiled program:
`java <ClassName>`
<br> <i>(where <ClassName> is the name of your Gem file without the .gem extension.)</i>

## Compiler Stages:

- Lexing: Performs lexical analysis and outputs the tokens found in the source code.
- Parsing: Performs parsing and outputs the parse tree structure.
- Semantic: Performs semantic analysis and outputs symbol tables and any errors.
- Code Generation: Generates Java bytecode that can be executed on the JVM.

## Error Detection:
The compiler can detect various types of errors:

- Lexical errors: Invalid tokens or character sequences.
- Syntax errors: Invalid grammar or structure.
- Semantic errors:
  - Duplicate type definitions.
  - Unresolved type references.
  - Usage of variables before definition.
  - Type mismatches in expressions and assignments.
  - Boolean operands in logical expressions.
|
## Code Maintenance
The codebase has been cleaned up by removing non-essential comments from Java files that were not generated by the compiler/parser/lexer. This improves code readability while maintaining all necessary functionality.

```
# Test duplicate type definitions
java -jar build/libs/GemLang-1.0-SNAPSHOT-uber.jar samples/errors/duplicate_types.gem --stop-at semantic

# Test unresolved type references
java -jar build/libs/GemLang-1.0-SNAPSHOT-uber.jar samples/errors/unresolved_types.gem --stop-at semantic

# Test variables used before definition
java -jar build/libs/GemLang-1.0-SNAPSHOT-uber.jar samples/errors/undefined_var.gem --stop-at semantic

# Test type mismatches
java -jar build/libs/GemLang-1.0-SNAPSHOT-uber.jar samples/errors/type_mismatch.gem --stop-at semantic

# Test invalid syntax
java -jar build/libs/GemLang-1.0-SNAPSHOT-uber.jar samples/errors/invalid_syntax.gem --stop-at parsing

# Test invalid tokens
java -jar build/libs/GemLang-1.0-SNAPSHOT-uber.jar samples/errors/invalid_tokens.gem --stop-at lexing
```

### Expected Output:
```Global Scope:
integer (type, integer, defined) at 0:0
number (type, number, defined) at 0:0
string (type, string, defined) at 0:0
boolean (type, boolean, defined) at 0:0
char (type, char, defined) at 0:0
Person (struct, Person, defined) at 2:0

Type Tables:
Person:
name (field, string, defined) at 3:2
age (field, integer, defined) at 4:2

Function Tables:

Semantic Errors:
line 6:7 Duplicate type definition: Person
```

## Addressing Open Questions:

### Valid identifier characters:
- Letters (a-z, A-Z), digits (0-9), underscore (_)
- Must start with a letter
- Case-sensitive
### Comments
Use double dash for single line comments:
```python
-- This is a comment
```
Use `--[ ... ]--` for multi line comments:
```python
--[ This is a comment
    But multi line ]--
```
### Numeric data types:
- `number` (covers all numeric values)
- `integer` (for whole numbers specifically)
### Character data type:
- `char` type for single characters
- `string` for text
### Literals:
- Integer: 42, -7
- Float: 3.14, -0.5
- Character: 'a', '$'
- String: "Hello, World!"
- Array: [1, 2, 3]
- Boolean: yes, no
### Program entry point:
- Programs start with start and end with finish
- No explicit main function required
### Statement termination:
- Each statement on a new line
- No special terminator needed
### Conditionals:
- Use `if`, `else if`, `else` with `end if` to close
- One-line conditionals use `then` for simple cases
### Loops and Control Flow:
- `for` loops for counted iterations
- `while` loops for condition-based iteration
- Infinite `loop` with break to exit
- `break` can be used in any loop to exit early
### Parameter passing:
- Default is pass-by-value
- Use ref keyword for pass-by-reference
### Reference variables:
- Use ref to create reference variables

`Program 1: Hello World (hello.gem)`
```python
-- Hello World program
-- Shows basic program structure and output
-- Expected output: "Hello, World!"

start
  print "Hello, World!"
finish
```

`Program 2: Variables and Types (variables.gem)`
```python
-- Variables and Types
-- Shows different data types and variable declarations
-- Expected output:
-- Name: John
-- Age: 30
-- Height: 1.85
-- Is a student: true

start
  string name = "John"
  integer age = 30
  number height = 1.85
  boolean is_student = yes

  print "Name: " + name
  print "Age: " + age
  print "Height: " + height
  print "Is a student: " + is_student
finish
```

`Program 3: Functions (functions.gem)`
```python
-- Functions
-- Shows how to define and call functions
-- Expected output:
-- Sum: 8
-- Greeting: Hello, Alice!

function add(integer a, integer b) returns integer
  return a + b
end function

function greet(string name) returns string
  return "Hello, " + name + "!"
end function

start
  integer result = add(3, 5)
  print "Sum: " + result

  string greeting = greet("Alice")
  print "Greeting: " + greeting
finish
```

`Program 4: Control Flow (control_flow.gem)`
```python
-- Control Flow
-- Shows conditional statements
-- Expected output (with hour = 14):
-- Good afternoon!
-- Time of day: afternoon

start
  integer hour = 14  -- Set to 2pm for testing

  if hour < 12
    print "Good morning!"
  else if hour < 18
    print "Good afternoon!"
  else
    print "Good evening!"
  end if

  string time_of_day
  if hour < 12 then time_of_day = "morning"
  else if hour < 18 then time_of_day = "afternoon"
  else time_of_day = "evening"

  print "Time of day: " + time_of_day
finish
```

`Program 5: Loops (loops.gem)`
```python
-- Loops

start
  -- First, calculate a sum with a while loop
  print "Calculating sum of 1 to 5:"
  integer counter = 1
  integer total = 0
  while counter <= 5
    total = total + counter
    counter = counter + 1
  end while
  print "Sum: " + total

  -- Then show a for loop
  print "Counting from 1 to 5:"
  for index from 1 to 5
    print index  -- Removed string concatenation
  end for

  -- Finally, a loop with break
  print "Fibonacci sequence:"
  integer first = 1
  integer second = 1
  loop
    print first  -- Removed string concatenation
    integer temp = first
    first = second
    second = temp + second
    if second > 20 then break
  end loop
finish
```

`Program 6: Arrays (arrays.gem)`
```python
-- Arrays
-- Shows array creation and usage
-- Expected output:
-- Fruits: Apple Banana Cherry
-- Scores: 85 92 78 90
-- Average score: 86.25

start
  -- String array
  string[] fruits = ["Apple", "Banana", "Cherry"]
  print "Fruits: "
  for i from 0 to 2
    print fruits[i] + " "
  end for

  -- Number array with calculations
  number[] scores = [85.0, 92.0, 78.0, 90.0]
  print "Scores: "
  for i from 0 to 3
    print scores[i] + " "
  end for

  -- Calculate average
  number sum = 0.0
  for i from 0 to 3
    sum = sum + scores[i]
  end for
  number average = sum / 4.0
  print "Average score: " + average
finish
```

`Program 7: Composite Types (composite.gem)`
```python
-- Composite Types
-- Shows struct definition and usage
-- Expected output:
-- Person: John Doe, 30 years old
-- Student: Alice Smith, 20 years old, ID: S12345

struct Person
  string name
  integer age
end struct

struct Student extends Person
  string student_id
  number gpa
end struct

start
  -- Create a Person
  Person person
  person.name = "John Doe"
  person.age = 30
  print "Person: " + person.name + ", " + person.age + " years old"

  -- Create a Student
  Student student
  student.name = "Alice Smith"
  student.age = 20
  student.student_id = "S12345"
  student.gpa = 3.8
  print "Student: " + student.name + ", " + student.age + " years old, ID: " + student.student_id
finish
```

`Program 8: Classes and Methods (classes.gem)`
```python
-- Classes and Methods
-- Shows class definition with methods
-- Expected output:
-- Rectangle area: 20
-- Circle area: 28.26

class Shape
  -- Base class for shapes
end class

class Rectangle is Shape
  number width
  number height

  function area() returns number
    return width * height
  end function
end class

class Circle is Shape
  number radius

  function area() returns number
    return 3.14 * radius * radius
  end function
end class

start
  Rectangle rect
  rect.width = 4.0
  rect.height = 5.0
  print "Rectangle area: " + rect.area()

  Circle circle
  circle.radius = 3.0
  print "Circle area: " + circle.area()
finish
```

`Program 9: Inner Functions (inner_functions.gem)`
```python
-- Inner Functions
-- Shows nested functions and closures
-- Expected output:
-- Outer value: 10
-- Inner value: 5
-- Combined: 15

-- Helper function to combine values
function combine_values(integer outer, integer inner) returns integer
  return outer + inner
end function

start
  integer outer_value = 10
  print "Outer value: " + outer_value
  
  integer inner_value = 5
  print "Inner value: " + inner_value
  
  integer result = combine_values(outer_value, inner_value)
  print "Combined: " + result
finish
```

`Program 10: User Input (user_input.gem)`
```python
-- User Input
-- Shows reading from the console
-- Expected output depends on input

start
  print "What is your name?"
  string name = read_line()

  print "How old are you?"
  integer age = read_integer()

  print "Hello, " + name + "!"
  print "You are " + age + " years old."

  integer dog_years = age * 7
  print "In dog years, you would be " + dog_years + " years old."
finish
```

`Program 11: Reference Parameters (references.gem)`
```python
-- Reference Parameters
-- Shows pass-by-reference for functions
-- Expected output:
-- Before swap: a=5, b=10
-- After swap: a=10, b=5

-- Return a new array with swapped values
function swap_values(integer a, integer b) returns integer[]
  integer[] result = [b, a]
  return result
end function

start
  -- Initialize variables
  integer a = 5
  integer b = 10
  print "Before swap: a=" + a + ", b=" + b

  -- Swap values and update variables
  integer[] swapped = swap_values(a, b)
  a = swapped[0]
  b = swapped[1]
  
  print "After swap: a=" + a + ", b=" + b
finish
```

`Program 12: Message Passing System (message.gem)`
```python
-- Message Processing
-- Shows basic text processing
-- Expected output:
-- Processing text: Hello, World!
-- Word count: 2
-- Character count: 13
-- Uppercase: HELLO, WORLD!

start
  string text = "Hello, World!"
  print "Processing text: " + text
  
  -- Count words (simple split by spaces)
  string[] words = split(text, " ")
  integer word_count = length(words)
  
  -- Count characters
  integer char_count = length(text)
  
  -- Convert to uppercase
  string uppercase_text = uppercase(text)
  
  -- Display results
  print "Word count: " + word_count
  print "Character count: " + char_count
  print "Uppercase: " + uppercase_text
finish
```
`Program 13: Basic Calculator (basic_calculator.gem)`
```python
-- Enhanced calculator program with more operations and features
-- Now that the compiler bug is fixed, we can add more functionality

start
  string continue_calc = "yes"

  while continue_calc == "yes"
    print "The only calculator you need!"
    print "------------------"

    print "Enter first number:"
    integer num1 = read_integer()

    print "Enter second number:"
    integer num2 = read_integer()

    print "Available Operations:"
    print "1. Addition"
    print "2. Subtraction"
    print "3. Multiplication"
    print "4. Division"
    print "5. Remainder/Modulus"
    print "6. Integer Power (first^second)"
    print "7. Square root (of first number)"
    print "8. Maximum"
    print "9. Minimum"
    print "10. Exit"

    print "Choose operation (1-10):"
    integer choice = read_integer()
    integer result = 0

    -- Addition
    if choice == 1
      result = num1 + num2
      print num1 + " + " + num2 + " = " + result

    -- Subtraction
    else if choice == 2
      result = num1 - num2
      print num1 + " - " + num2 + " = " + result

    -- Multiplication
    else if choice == 3
      result = num1 * num2
      print num1 + " * " + num2 + " = " + result

    -- Division
    else if choice == 4
      if num2 == 0
        print "Error: Cannot divide by zero"
      else
        result = num1 / num2
        print num1 + " / " + num2 + " = " + result

        -- Show decimal approximation note for integer division
        if num1 % num2 != 0
          print "Note: Integer division truncates decimal portion"
        end if
      end if

    -- Remainder/Modulus
    else if choice == 5
      if num2 == 0
        print "Error: Cannot find remainder with zero"
      else
        result = num1 % num2
        print num1 + " % " + num2 + " = " + result
      end if

    -- Integer Power (simple implementation for non-negative powers)
    else if choice == 6
      if num2 < 0
        print "Error: Negative powers not supported in this calculator"
      else
        result = 1
        integer i = 0
        while i < num2
          result = result * num1
          i = i + 1
        end while
        print num1 + " ^ " + num2 + " = " + result
      end if

    -- Square root (integer approximation)
    else if choice == 7
      if num1 < 0
        print "Error: Cannot calculate square root of negative number"
      else if num1 == 0
        result = 0
        print "Square root of 0 = 0"
      else
        -- Simple integer square root algorithm
        result = 1
        while result * result <= num1
          result = result + 1
        end while
        result = result - 1
        print "Square root of " + num1 + " â‰ˆ " + result + " (integer approximation)"
      end if

    -- Maximum
    else if choice == 8
      if num1 > num2
        result = num1
      else
        result = num2
      end if
      print "Maximum of " + num1 + " and " + num2 + " = " + result

    -- Minimum
    else if choice == 9
      if num1 < num2
        result = num1
      else
        result = num2
      end if
      print "Minimum of " + num1 + " and " + num2 + " = " + result

    -- Exit
    else if choice == 10
      print "Exiting calculator..."
      continue_calc = "no"

    -- Invalid choice
    else
      print "Invalid choice! Please select from options 1-10."
    end if

    -- Ask if user wants to continue
    if continue_calc != "no"
      print "Do you want to perform another calculation?"
      print "1. Yes"
      print "2. No"

      integer continue_choice = read_integer()
      if continue_choice == 1
        continue_calc = "yes"
      else
        continue_calc = "no"
        print "Thank you for using the calculator!"
      end if
    end if
  end while
finish
```